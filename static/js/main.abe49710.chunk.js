(this["webpackJsonpsam-db-project"]=this["webpackJsonpsam-db-project"]||[]).push([[0],{120:function(e,t,a){},122:function(e,t,a){},124:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},151:function(t,a,r){"use strict";r.r(a);var n=r(2),c=r(0),s=r.n(c),l=r(10),i=r.n(l),o=(r(120),r(25)),u=r.n(o),d=r(41),j=r(33),b=r(11),h=r(26),O=(r(122),r(69)),p=r(99),f=r(48),g=(r(124),r(207)),x=r(96),m=r.n(x),v=r(95),w=r.n(v),y=r(193),S=r(210),C=r(200),k=r(196),D=r(195),F=r(209),R=r(211),T=r(36),N=r.n(T),E=function(e){var t=e.addRow,a=e.add,r=e.data,l=e.id,i=e.setData,o=e.alertSetter,u=Object(c.useState)(a?{Class:"",Title:"",Link:"",Categories:"",Notes:""}:{Class:r[l].Class,Title:r[l].Title,Link:r[l].Link,Categories:r[l].Categories,Notes:r[l].Notes,_id:r[l]._id}),d=Object(h.a)(u,2),O=d[0],p=d[1],f=s.a.useState(!1),g=Object(h.a)(f,2),x=g[0],v=g[1],T=function(){v(!0)},E=function(){v(!1)},H=function(e){N.a.post("https://stark-anchorage-94670.herokuapp.com/addData",e).then((function(a){console.log("Add Data:",a.status);var r=a.data.ops[0]._id;e._id=r,t(e)})).catch((function(e){console.log(e),o(!0,"error","Error adding data")}))},P=function(e){return function(t){var a=t.target.value;p(Object(b.a)(Object(b.a)({},O),{},Object(j.a)({},e,a)))}};return Object(n.jsxs)("div",{children:[a?Object(n.jsx)(R.a,{title:"Add",children:Object(n.jsx)(y.a,{className:"addDataForm",onClick:T,variant:"outlined",color:"primary",size:"large",startIcon:Object(n.jsx)(w.a,{fontSize:"large"}),children:"Document"})}):Object(n.jsx)(R.a,{title:"Edit",children:Object(n.jsx)(y.a,{"aria-label":"edit",onClick:T,variant:"outlined",color:"secondary",children:Object(n.jsx)(m.a,{})})}),Object(n.jsxs)(S.a,{open:x,onClose:E,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(D.a,{id:"form-dialog-title",children:a?"Add New Document":"Edit Document"}),Object(n.jsxs)(k.a,{children:[Object(n.jsx)(F.a,{autoFocus:!0,margin:"dense",label:"Class",type:"text",fullWidth:!0,value:O.Class,onChange:P("Class")}),Object(n.jsx)(F.a,{margin:"dense",label:"Title",type:"text",fullWidth:!0,value:O.Title,onChange:P("Title")}),Object(n.jsx)(F.a,{margin:"dense",label:"Notes",type:"text",fullWidth:!0,value:O.Notes,onChange:P("Notes"),multiline:!0}),Object(n.jsx)(F.a,{margin:"dense",label:"Link",type:"text",fullWidth:!0,value:O.Link,onChange:P("Link")}),Object(n.jsx)(F.a,{margin:"dense",label:"Categories",type:"text",fullWidth:!0,value:O.Categories,onChange:P("Categories")})]}),Object(n.jsxs)(C.a,{children:[Object(n.jsx)(y.a,{onClick:E,color:"primary",children:"Cancel"}),a?Object(n.jsx)(y.a,{onClick:function(e){E(),H(O)},color:"primary",children:"Save"}):Object(n.jsx)(y.a,{onClick:function(e){E(),i((function(e){return e.map((function(t,a){return a===l?Object(b.a)({},e[a]=O):t}))})),N.a.post("https://stark-anchorage-94670.herokuapp.com/updateData",O).then((function(e){console.log("Update Data:",e.status,e),200==e.status?o(!0,"success","Data successfully updated!"):o(!0,"error","Error updating data")})).catch((function(e){console.log(e),o(!0,"error","Error updating data")}))},color:"primary",children:"Save"})]})]})]})},H=r(4),P=r(67),A=r.n(P),L=r(203),_=r(201),I=r(13),M=r(202),B=r(101),W=r(98),U=Object(_.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.primary.main,backgroundColor:Object(I.d)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"},search:{position:"absolute",right:"0px"}}})),J=function(e){var t=U(),a=e.numSelected,r=e.deleteUserHandler,c=e.selectedRows,s=e.addRow,l=e.rows,i=e.handleFilterChange,o=e.filterInput,u=e.alertSetter;return Object(n.jsxs)(M.a,{className:Object(H.a)(t.root,Object(j.a)({},t.highlight,a>0)),children:[a>0?Object(n.jsxs)(B.a,{className:t.title,color:"inherit",variant:"subtitle1",children:[a," items selected"]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(E,{addRow:s,add:!0,alertSetter:u}),Object(n.jsx)(F.a,{id:"outlined-search",label:"Search ".concat(l.length," records..."),type:"search",variant:"outlined",name:"searchField",className:Object(H.a)(t.search),value:o,onChange:i})]}),a>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(R.a,{title:"Delete",children:Object(n.jsx)(L.a,{"aria-label":"delete",onClick:r,children:Object(n.jsx)(A.a,{color:"secondary"})})}),Object(n.jsx)(R.a,{title:"Share",children:Object(n.jsx)(L.a,{"aria-label":"share",children:Object(n.jsx)(W.a,{color:"#3F50B5"})})}),console.log("selectedRows",c)]}):null]})};function V(e){var t=e.columns,a=e.data,r=e.updateMyData,l=e.setData,i=e.setShowAlert,o=e.alertSetter,u=e.addRow,d=s.a.forwardRef((function(e,t){var a=e.indeterminate,r=Object(p.a)(e,["indeterminate"]),c=s.a.useRef(),l=t||c;return s.a.useEffect((function(){l.current.indeterminate=a}),[l,a]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(g.a,Object(b.a)(Object(b.a)({ref:l},r),{},{color:"primary"}))})})),j=Object(c.useState)(""),x=Object(h.a)(j,2),m=x[0],v=x[1],w=Object(f.useTable)({columns:t,data:a,updateMyData:r},f.useFilters,f.useSortBy,f.useRowSelect,(function(e){e.allColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return Object(n.jsx)("div",{maxwidth:"15px",children:Object(n.jsx)(d,Object(b.a)({},t()))})},Cell:function(e){var t=e.row;return Object(n.jsx)("div",{maxwidth:"15px",children:Object(n.jsx)(d,Object(b.a)({},t.getToggleRowSelectedProps()))})}}].concat(Object(O.a)(e))}))})),y=w.getTableProps,S=w.getTableBodyProps,C=w.headerGroups,k=w.rows,D=w.prepareRow,F=w.setFilter,R=w.selectedFlatRows,T=w.state.selectedRowIds;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(J,{numSelected:Object.keys(T).length,deleteUserHandler:function(e){if(window.confirm("Are you sure you wish to delete these items?")){var t=(c=a,s=Object.keys(T).map((function(e){return parseInt(e,10)})),c.filter((function(e,t){return!s.includes(t)})));l(t);var r=[];for(var n in R)r.push(R[n].original._id);console.log("list:",r),N.a.post("http://localhost:3000/deleteMany",r).then((function(e){200==e.status?(console.log("success deleting many"),i({show:!0,type:"success",message:"Success deleting items!"})):i({show:!0,type:"error",message:"Error deleting items!"})}))}var c,s},selectedRows:R,addRow:u,rows:k,filterInput:m,handleFilterChange:function(e){var t=e.target.value||void 0;F("Title",t),v(t)},alertSetter:o}),Object(n.jsxs)("table",Object(b.a)(Object(b.a)({},y()),{},{children:[Object(n.jsx)("thead",{children:C.map((function(e){return Object(n.jsx)("tr",Object(b.a)(Object(b.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(b.a)(Object(b.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:[e.render("Header"),Object(n.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]}))}))}))}))}),Object(n.jsx)("tbody",Object(b.a)(Object(b.a)({},S()),{},{children:k.map((function(e,t){return D(e),Object(n.jsx)("tr",Object(b.a)(Object(b.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(b.a)(Object(b.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})}var z=function(e){var t=e.values;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("span",{className:t?"badge":"",children:t})})},G=r(206),q=r(204),K=(r(146),function(e){var t=e.state;e.setter;return!0===t.show?Object(n.jsx)("div",{children:Object(n.jsxs)(G.a,{className:"alert",severity:t.type,variant:"filled",children:[Object(n.jsxs)(q.a,{children:[" ","success"==t.type?"Success":"Error"]}),t.message]})}):Object(n.jsx)(n.Fragment,{})}),Q=(r(147),r(205)),X=r(212),Y=r(199),Z=Object(_.a)((function(e){return{formControl:{margin:e.spacing(1),display:"flex"},selectEmpty:{marginTop:e.spacing(2)},Select:{maxwidth:20}}}));var $=function(e){var t=e.column,a=t.filterValue,r=t.setFilter,c=t.preFilteredRows,l=t.id,i=Z(),o=s.a.useMemo((function(){var e=new Set;return c.forEach((function(t){e.add(t.values[l])})),Object(O.a)(e.values())}),[l,c]);return Object(n.jsx)(Y.a,{className:i.formControl,children:Object(n.jsxs)(Q.a,{className:i.Select,value:a,defaultValue:"undefined",onChange:function(e){r(e.target.value||void 0)},children:[Object(n.jsx)(X.a,{defaultValue:"",children:"All"}),o.map((function(e,t){return Object(n.jsx)(X.a,{value:e,children:e},t)}))]})})},ee=r(97),te=r.n(ee);r(148);var ae=function(e){var t=e.value,a=e.removeRow,r=e.addRow,c=e.data,s=e.id,l=e.setData,i=e.alertSetter;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"actions",children:[Object(n.jsx)(E,{add:!1,addRow:r,data:c,id:s,setData:l,alertSetter:i}),Object(n.jsx)(R.a,{title:"Delete",children:Object(n.jsx)(y.a,{value:t,onClick:a,variant:"outlined",color:"primary",children:Object(n.jsx)(A.a,{})})})]})})},re=r(14);r(68);var ne=r(54);r(150);function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://stark-anchorage-94670.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){var t=e.setToken,a=e.alertSetter,r=Object(c.useState)(),s=Object(h.a)(r,2),l=s[0],i=s[1],o=Object(c.useState)(),j=Object(h.a)(o,2),b=j[0],O=j[1],p=function(){var e=Object(d.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,ce({username:l,password:b});case 3:"validToken"==(n=e.sent).token?(a(!0,"success","Success logging in"),console.log("token: ",n),t(n)):a(!0,"error","Error logging in");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"login-wrapper",children:[Object(n.jsx)("h1",{children:"Please Log In"}),Object(n.jsxs)("form",{onSubmit:p,children:[Object(n.jsxs)("label",{children:[Object(n.jsx)("p",{children:"Username"}),Object(n.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(n.jsxs)("label",{children:[Object(n.jsx)("p",{children:"Password"}),Object(n.jsx)("input",{type:"password",onChange:function(e){return O(e.target.value)}})]}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"submit",children:"Submit"})})]})]})}var ie=function(){var t=Object(c.useState)([]),a=Object(h.a)(t,2),r=a[0],s=a[1],l=Object(c.useState)(),i=Object(h.a)(l,2),o=i[0],O=i[1],p=Object(c.useState)({show:!1,type:"",message:""}),f=Object(h.a)(p,2),g=f[0],x=f[1];function m(e,t,a){x({show:e,type:t,message:a})}function v(e){if(e.preventDefault(),window.confirm("Are you sure you wish to delete this?")){if(e.currentTarget.value){var t="_id="+e.currentTarget.value;N.a.post("https://stark-anchorage-94670.herokuapp.com/deleteData",t).then((function(e){200==e.status?(m(!0,"success","Success deleting item!"),console.log("Remove Data: ",e.status)):m(!0,"error","Error deleting item!")}))}var a=r.filter((function(t){return t._id!=e.currentTarget.value}));s(a)}}function w(e){s((function(t){return t.concat(e)})),m(!0,"success","Success adding row!")}Object(c.useEffect)((function(){if(1==g.show){var e=setTimeout((function(){m(!1)}),2e3);return function(){clearTimeout(e)}}}));var S=Object(c.useMemo)((function(){return[{Header:" ",columns:[{Header:"",accessor:"Class",Filter:$,filter:"includes"},{Header:"Title",accessor:"Title",Filter:"",filter:"includes"},{Header:"Notes",accessor:"Notes",Filter:"",filter:"includes"},{Header:"Link",accessor:"Link",Cell:function(e){var t=e.cell.value;return Object(n.jsx)(y.a,{href:t,target:"_blank",variant:"outlined",color:"primary",children:Object(n.jsx)(te.a,{})})},Filter:"",filter:"includes"},{Header:"",accessor:"Categories",Cell:function(e){var t=e.cell.value;return Object(n.jsx)(z,{values:t})},Filter:$,filter:"includes"},{Header:"Actions",accessor:"_id",Cell:function(e){var t=e.cell,a=t.value,c=t.row;return Object(n.jsx)(ae,{value:a,removeRow:v,addRow:w,data:r,id:c.index,setData:s,alertSetter:m})},Filter:"",filter:"excludes"}]}]}),[r]);return Object(c.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1,t="",t="https://stark-anchorage-94670.herokuapp.com/getData",N.a.get(t).then((function(e){s(e.data),console.log(r)}));case 4:case"end":return e.stop()}}),e)})))()}),[]),o?Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(K,{state:g,setter:m}),Object(n.jsx)(V,{columns:S,data:r,updateMyData:function(t,a,r){e.preventDefault(),s((function(e){return e.map((function(n,c){return c===t?Object(b.a)(Object(b.a)({},e[t]),{},Object(j.a)({},a,r)):n}))}))},setData:s,setShowAlert:x,addRow:w,alertSetter:m}),Object(n.jsx)(ne.a,{children:Object(n.jsxs)(re.c,{children:[Object(n.jsx)(re.a,{path:"/login",children:Object(n.jsx)(le,{})}),Object(n.jsx)(re.a,{path:"/logout",children:Object(n.jsx)(le,{})})]})})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(K,{state:g,setter:m}),Object(n.jsx)(le,{setToken:O,alertSetter:m})]})};i.a.render(Object(n.jsx)(ne.a,{children:Object(n.jsx)(ie,{})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.abe49710.chunk.js.map